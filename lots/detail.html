<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Лот | Stork Hotel</title>
    <link rel="icon" type="image/png" href="/favicon-32x32.png">
    <!-- <link rel="stylesheet" href="../assets/css/main.css"> -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
     <style>
        @import url('https://fonts.googleapis.com/css2?family=Onest&family=Unbounded&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap');
     </style>
    <style type="text/tailwindcss">
        @theme {
        --color-red-button: #CA1F26;
        --color-back-black-sections: #1D1D1D;
        --color-nearest-text: #616161;
        --color-back-white-sections: #F5F5F5;
        --color-description-text-color: #AEB4BB;
        --color-place-bg: #902F2F;
        --color-blue-bg: #6366F1;
        --color-hover-blue: #4F46E5;
        --color-disabled-bg: #DBDBDB;
        --color-disabled-text: #8C949B;
        --font-inter: 'Inter', sans-serif;
        --font-unbounded: 'Unbounded', sans-serif;
        
        /* Breakpoints */
        --breakpoint-sx: 275px;
        --breakpoint-ss: 480px;
        --breakpoint-sm: 640px;
        --breakpoint-md: 769px;
        --breakpoint-lg: 1025px;
        --breakpoint-xl: 1280px;
        --breakpoint-2xl: 1536px;
        --breakpoint-3xl: 1920px;
        --breakpoint-4xl: 2560px;
        }

        @layer utilities {
        .container {
            max-width: 100%;
            margin-left: auto;
            margin-right: auto;
            padding-left: 1rem;
            padding-right: 1rem;
            
            @media (min-width: 769px) {
                max-width: 1920px;
                padding-left: 3.75rem;
                padding-right: 3.75rem;
            }
        }
        }

        /* Base styles */
        body {
            font-family: var(--font-inter);
            background-color: var(--color-back-black-sections);
            color: white;
        }

        .title {
            font-family: Unbounded, sans-serif;
            font-size: clamp(1.3rem, .8rem + 2.564vw, 4rem);
            text-transform: uppercase;
        }

        /* Animations */
        @keyframes blink {
        0% { opacity: 0; }
        100% { opacity: 1; }
        }
        .animate-blink {
        animation: blink 1.5s linear infinite;
        }

        @keyframes vector {
        0% { bottom: -2px; right: -2px; }
        100% { bottom: 2px; right: 2px; }
        }
        .animate-vector {
        animation: vector 2s linear infinite;
        }

    </style>
</head>
<body class="bg-back-black-sections text-white font-inter flex flex-col min-h-screen">

    <!-- Header -->
    <header class="fixed w-full z-50 transition-all duration-300" id="main-header">
        <!-- Desktop Nav -->
        <nav class="hidden lg:flex bg-black/50 py-[1.2rem] backdrop-blur-sm">
            <div class="container mx-auto flex justify-between items-center px-4 md:px-15">
                <div class="flex items-center gap-4">
                    <a href="/" class="block">
                        <svg viewBox="0 0 168 51" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-32 h-10 sx:fill-black lg:fill-white"><path d="M56.3574 44.1764H63.5417V39.6411H64.826V49.8853H63.5417V45.3098H56.3574V49.8853H55.0731V39.6411H56.3574V44.1764ZM75.8415 50.063C74.7031 50.063 73.7005 49.84 72.8303 49.394C71.9601 48.9481 71.2844 48.326 70.8016 47.5296C70.3187 46.7332 70.0773 45.8111 70.0773 44.7632C70.0773 43.7069 70.3187 42.7831 70.8016 41.99C71.2844 41.1987 71.9601 40.58 72.8303 40.1323C73.7005 39.6863 74.7031 39.4633 75.8415 39.4633C76.98 39.4633 77.9826 39.6863 78.8477 40.1323C79.7129 40.58 80.3869 41.1987 80.8681 41.99C81.351 42.7831 81.5924 43.7069 81.5924 44.7632C81.5924 45.8111 81.351 46.7332 80.8681 47.5296C80.3869 48.326 79.7129 48.9481 78.8477 49.394C77.9826 49.84 76.98 50.063 75.8415 50.063ZM75.8415 48.9028C76.7436 48.9028 77.5265 48.7318 78.1922 48.3897C78.8561 48.0494 79.3709 47.5682 79.7347 46.9495C80.0985 46.3292 80.2813 45.6015 80.2813 44.7632C80.2813 43.9165 80.0985 43.1838 79.7347 42.5651C79.3709 41.9448 78.8561 41.4669 78.1922 41.1299C77.5265 40.7929 76.7436 40.6253 75.8415 40.6253C74.9412 40.6253 74.1582 40.7929 73.4926 41.1299C72.8286 41.4669 72.3105 41.9448 71.9434 42.5651C71.5745 43.1838 71.3901 43.9165 71.3901 44.7632C71.3901 45.6015 71.5745 46.3292 71.9434 46.9495C72.3105 47.5682 72.8286 48.0494 73.4926 48.3897C74.1582 48.7318 74.9412 48.9028 75.8415 48.9028ZM85.1368 39.6411H95.2184V40.7745H90.8189V49.8853H89.5363V40.7745H85.1368V39.6411ZM107.914 44.2166V45.3098H100.934V48.7653H108.283V49.8853H100.934H99.6514V48.7653V45.3098V44.2166V40.7611V39.6411H100.934H108.214V40.7611H100.934V44.2166H107.914ZM122.217 48.7519H115.046V39.6411H113.762V48.7519V49.8853H115.046H122.217V48.7519ZM114.112 21.1092C114.112 22.1001 113.92 23.0659 113.418 23.9193C112.944 24.7291 112.275 25.326 111.452 25.7317C110.513 26.1945 109.463 26.3554 108.434 26.3554C107.402 26.3554 106.353 26.1945 105.414 25.7317C104.591 25.326 103.922 24.7291 103.446 23.9193C102.948 23.0659 102.753 22.1001 102.753 21.1092C102.753 20.1183 102.948 19.1526 103.446 18.2992C103.922 17.4877 104.591 16.8925 105.414 16.4867C106.353 16.024 107.402 15.863 108.434 15.863C109.463 15.863 110.513 16.024 111.452 16.4867C112.275 16.8925 112.944 17.4877 113.418 18.2992C113.92 19.1526 114.112 20.1183 114.112 21.1092ZM98.7963 21.1092C98.7963 22.7641 99.1501 24.3451 100.002 25.7518C100.833 27.1233 101.98 28.1394 103.375 28.8553C104.95 29.6617 106.688 29.9686 108.434 29.9686C110.177 29.9686 111.916 29.6617 113.49 28.8553C114.885 28.1394 116.032 27.1233 116.862 25.7518C117.715 24.3451 118.069 22.7641 118.069 21.1092C118.069 19.4544 117.715 17.8733 116.862 16.465C116.032 15.0951 114.885 14.0791 113.49 13.3632C111.916 12.5567 110.177 12.2499 108.434 12.2499C106.688 12.2499 104.95 12.5567 103.375 13.3632C101.98 14.0791 100.833 15.0951 100.002 16.465C99.1501 17.8733 98.7963 19.4544 98.7963 21.1092ZM71.3867 24.9068C71.4001 24.7341 71.4068 24.5614 71.4068 24.3837C71.4068 23.49 71.2576 22.5863 70.81 21.8319C70.3539 21.0623 69.6162 20.571 68.8617 20.2474C67.73 19.7629 66.3803 19.5365 65.1815 19.3873L61.7997 18.9648C61.1559 18.8843 60.2086 18.72 59.6536 18.321C59.2814 18.051 59.0584 17.6788 59.0148 17.201H59.0081C59.0081 16.4868 59.4491 16.0206 60.0661 15.7222C60.8792 15.3299 61.8953 15.2343 62.7873 15.2343C63.4965 15.2343 64.2375 15.3014 64.9149 15.516C65.4363 15.682 65.9511 15.9251 66.3568 16.2973C66.6938 16.6041 66.9068 16.9814 66.9889 17.4223H70.9558C70.8737 16.423 70.4998 15.5478 69.8258 14.7917C69.0562 13.9265 68.0586 13.333 66.9839 12.9273C65.6711 12.431 64.251 12.2499 62.8526 12.2499C61.4694 12.2499 60.0426 12.4058 58.7298 12.8619C57.7004 13.2207 56.7346 13.7672 56.0254 14.6123C55.3967 15.3617 55.1032 16.2353 55.0747 17.201H55.0731C55.0731 18.6546 55.5056 19.8886 56.5166 20.8141C57.7423 21.9375 59.7458 22.3432 61.2749 22.521L64.4807 22.8948C65.1547 22.972 66.221 23.1346 66.8028 23.5504C67.2421 23.8639 67.4718 24.32 67.4718 24.9068C67.4718 25.6613 66.9923 26.1492 66.3468 26.4627C65.4749 26.8852 64.3633 26.9842 63.4059 26.9842C62.6397 26.9842 61.8534 26.9037 61.1224 26.6673C60.5339 26.4778 59.9722 26.1911 59.5329 25.7518C59.1708 25.3897 58.926 24.9621 58.8304 24.4642H54.8585C54.9255 25.5171 55.2944 26.451 55.9818 27.2625C56.7648 28.1897 57.8093 28.8184 58.9327 29.2476C60.3293 29.7791 61.8517 29.9686 63.3389 29.9686C64.7757 29.9686 66.2428 29.7858 67.5908 29.2694C68.6739 28.8536 69.6732 28.2416 70.4076 27.3312C70.9894 26.6136 71.3062 25.8021 71.3867 24.9068ZM150.643 29.3968H153.394H154.204H154.533V28.9944V28.2567V24.2881V22.8227H158.282L163.417 29.3968H167.699L161.211 21.1092L167.699 12.8216H163.417L158.282 19.3957H154.533V12.8216H150.643V19.3957V22.8227V29.3968ZM94.0246 16.247V12.8216H77.2046V16.247H83.658V29.3968H87.5713V16.247H94.0246ZM129.447 16.247V20.2038H136.165C136.923 20.2038 137.527 20.0312 137.973 19.6841C138.419 19.3387 138.643 18.8525 138.643 18.2254C138.643 17.6 138.419 17.1138 137.973 16.7667C137.527 16.4197 136.923 16.247 136.165 16.247H129.447ZM129.447 29.3968H129.432H125.542V12.8216H128.003H129.432H136.197C137.465 12.8216 138.578 13.0496 139.537 13.5057C140.496 13.9617 141.245 14.5922 141.787 15.3953C142.328 16.2 142.598 17.1423 142.598 18.2254C142.598 19.3085 142.328 20.2508 141.787 21.0556C141.245 21.8604 140.496 22.4891 139.537 22.9451C139.049 23.1782 138.522 23.3509 137.954 23.4649L142.598 29.3968H138.316L133.811 23.6309H129.447V29.3968ZM26.0136 15.0415C26.0371 14.5066 26.0338 13.9617 26.0136 13.437L26.0103 13.4353L25.9214 13.4034C25.8057 13.3615 25.6901 13.3213 25.5744 13.281L25.4738 13.2475C25.3564 13.2073 25.2374 13.1687 25.12 13.1318L25.0395 13.1067C24.9171 13.0698 24.7931 13.0329 24.669 12.9977L24.5868 12.9742C24.4628 12.939 24.337 12.9038 24.2113 12.8719L24.1392 12.8535C24.0084 12.82 23.8776 12.7881 23.7452 12.7579L23.6747 12.7411C23.5423 12.711 23.4098 12.6825 23.2774 12.654L23.2237 12.6439C23.0829 12.6154 22.942 12.5869 22.7995 12.5617L22.7559 12.555C22.6134 12.5299 22.4709 12.5047 22.3284 12.4829L22.2915 12.4779C22.1423 12.4544 21.9931 12.4343 21.8439 12.4142L21.817 12.4125C21.6661 12.3924 21.5152 12.3756 21.3627 12.3606L21.3442 12.3572C21.1883 12.3421 21.0324 12.3287 20.8764 12.317L20.8597 12.3153C20.7021 12.3035 20.5428 12.2935 20.3852 12.2851H20.3802C20.2209 12.2767 20.0599 12.27 19.899 12.2667H19.8839C19.7229 12.2616 19.562 12.26 19.3993 12.26C19.235 12.26 19.0707 12.2616 18.9064 12.2667C18.7421 12.27 18.5794 12.2767 18.4168 12.2851C18.2542 12.2935 18.0915 12.3035 17.9289 12.3153C17.768 12.3287 17.607 12.3421 17.446 12.3589C17.2851 12.3756 17.1258 12.3924 16.9665 12.4125C16.8072 12.4343 16.648 12.4561 16.4904 12.4796C16.3328 12.5047 16.1752 12.5299 16.0192 12.5584C15.8616 12.5869 15.7057 12.6154 15.5498 12.6473C15.3955 12.6791 15.2396 12.7126 15.0853 12.7495C14.9311 12.7847 14.7785 12.8216 14.6259 12.8619C14.4734 12.9004 14.3225 12.9423 14.1699 12.9843C14.019 13.0279 13.8698 13.0714 13.7206 13.1184C13.5697 13.1653 13.4221 13.214 13.2729 13.2643C13.1254 13.3129 12.9778 13.3649 12.8319 13.4185C12.6861 13.4722 12.5402 13.5275 12.396 13.5845C12.2518 13.6415 12.1076 13.7002 11.9651 13.7605C11.8226 13.8209 11.6801 13.8829 11.5393 13.9466C11.3984 14.0104 11.2576 14.0758 11.1184 14.1428C10.9793 14.2099 10.8418 14.2786 10.7043 14.349C10.5668 14.4195 10.431 14.4916 10.2952 14.5653C10.1611 14.6391 10.0253 14.7129 9.89281 14.79C9.75867 14.8671 9.62622 14.9459 9.49544 15.0247C9.36466 15.1052 9.23389 15.1857 9.10479 15.2678C8.97569 15.3517 8.84826 15.4355 8.72084 15.521C8.46767 15.6937 8.21785 15.8714 7.97306 16.0542C7.84899 16.1464 7.72827 16.2386 7.60755 16.3325C7.48851 16.4281 7.36947 16.5236 7.25043 16.6209C7.13307 16.7181 7.0157 16.817 6.90001 16.9176C6.78433 17.0166 6.67031 17.1188 6.55798 17.2211C6.44397 17.3234 6.33331 17.429 6.22265 17.533C6.112 17.6386 6.00301 17.7459 5.89403 17.8532C5.78673 17.9622 5.67942 18.0712 5.5738 18.1818C5.46817 18.2925 5.36422 18.4031 5.26194 18.5172C5.15967 18.6295 5.05739 18.7435 4.95847 18.8592C4.85787 18.9749 4.75895 19.0922 4.66171 19.2096C4.56446 19.327 4.46889 19.4477 4.375 19.5667C4.27943 19.6874 4.18722 19.8082 4.095 19.9322C3.91225 20.177 3.73453 20.4268 3.56183 20.68C3.47633 20.8074 3.39249 20.9349 3.30866 21.064C3.22651 21.1931 3.14603 21.3238 3.06555 21.4546C2.98507 21.5871 2.90795 21.7178 2.83082 21.852C2.7537 21.9844 2.67993 22.1202 2.60615 22.2544C2.53238 22.3902 2.46029 22.526 2.38987 22.6635C2.31945 22.801 2.25071 22.9401 2.18364 23.0776C2.11658 23.2168 2.05119 23.3576 1.98748 23.4984C1.92376 23.6393 1.86173 23.7818 1.80137 23.9243C1.74101 24.0668 1.68233 24.211 1.62532 24.3552C1.56832 24.4994 1.51299 24.6452 1.45934 24.7911C1.40568 24.9387 1.35371 25.0845 1.30341 25.2321C1.25479 25.3813 1.20616 25.5288 1.15922 25.6797C1.11227 25.829 1.06868 25.9782 1.02509 26.1291C0.981495 26.2816 0.941255 26.4325 0.902693 26.5851C0.862454 26.7377 0.825568 26.8919 0.790358 27.0445C0.753472 27.1988 0.71994 27.353 0.688084 27.5089C0.656228 27.6649 0.627725 27.8208 0.599222 27.9784C0.570719 28.1343 0.54557 28.2919 0.52042 28.4495C0.496947 28.6071 0.475151 28.7664 0.453355 28.9257C0.433235 29.085 0.416469 29.2459 0.399703 29.4052C0.382936 29.5662 0.367847 29.7271 0.35611 29.8881V29.8898C0.344374 30.0507 0.334314 30.2134 0.325931 30.376C0.317548 30.5386 0.310841 30.7013 0.307488 30.8656C0.302458 31.0299 0.300781 31.1942 0.300781 31.3585C0.300781 31.5228 0.302458 31.6871 0.307488 31.8514C0.310841 32.0141 0.317548 32.1784 0.325931 32.341C0.334314 32.5036 0.344374 32.6663 0.35611 32.8272C0.367847 32.9899 0.382936 33.1508 0.399703 33.3118C0.416469 33.4711 0.433235 33.632 0.453355 33.7913C0.475151 33.9506 0.496947 34.1082 0.52042 34.2675C0.54557 34.4251 0.570719 34.5827 0.599222 34.7386C0.627725 34.8962 0.656228 35.0521 0.688084 35.208C0.71994 35.3623 0.753472 35.5182 0.790358 35.6708C0.825568 35.825 0.862454 35.9793 0.902693 36.1319C0.941255 36.2844 0.983171 36.4353 1.02509 36.5862C1.06868 36.7371 1.11227 36.888 1.15922 37.0373C1.20616 37.1865 1.25479 37.3357 1.30341 37.4832C1.35371 37.6308 1.40568 37.7783 1.45934 37.9242C1.51299 38.0717 1.56832 38.2159 1.62532 38.3618C1.68233 38.506 1.74101 38.6502 1.80137 38.7927C1.86173 38.9352 1.92376 39.0777 1.98748 39.2186C2.05119 39.3594 2.11658 39.4986 2.18364 39.6377C2.25071 39.7769 2.31945 39.916 2.38987 40.0535C2.46029 40.1893 2.53238 40.3268 2.60615 40.4626C2.67993 40.5967 2.7537 40.7309 2.83082 40.865C2.90795 40.9975 2.98507 41.1299 3.06555 41.2607C3.14603 41.3931 3.22651 41.5223 3.30866 41.6514C3.39249 41.7805 3.47633 41.9096 3.56183 42.037C3.73453 42.2901 3.91225 42.54 4.095 42.7848C4.18722 42.9072 4.27943 43.0295 4.375 43.1503C4.46889 43.2693 4.56446 43.3883 4.66171 43.5074C4.75895 43.6247 4.85787 43.7404 4.95847 43.8561C5.05739 43.9718 5.15967 44.0875 5.26194 44.1998C5.36422 44.3122 5.46817 44.4245 5.5738 44.5352C5.67942 44.6458 5.78673 44.7548 5.89403 44.8638C6.00301 44.9711 6.112 45.0767 6.22265 45.1823C6.33331 45.288 6.44397 45.3919 6.55798 45.4959C6.67031 45.5981 6.78433 45.6987 6.90001 45.7993C7.0157 45.8999 7.13307 45.9989 7.25043 46.0961C7.36947 46.1934 7.48851 46.2889 7.60755 46.3828C7.72827 46.4784 7.84899 46.5706 7.97306 46.6628C8.21785 46.8456 8.46767 47.0233 8.72084 47.1943C8.84826 47.2815 8.97569 47.3653 9.10479 47.4475C9.23389 47.5313 9.36466 47.6118 9.49544 47.6923C9.6279 47.7711 9.75867 47.8499 9.89281 47.927C10.0253 48.0024 10.1611 48.0779 10.2952 48.1517C10.431 48.2254 10.5668 48.2975 10.7043 48.3679C10.8418 48.4384 10.9793 48.5054 11.1184 48.5742C11.2576 48.6396 11.3984 48.7066 11.5393 48.7703C11.6801 48.8341 11.8226 48.8961 11.9651 48.9564C12.1076 49.0168 12.2518 49.0755 12.396 49.1325C12.5402 49.1895 12.6861 49.2448 12.8319 49.2985C12.9778 49.3505 13.1254 49.4024 13.2729 49.4527C13.4221 49.503 13.5697 49.5516 13.7206 49.5986C13.8698 49.6439 14.019 49.6891 14.1699 49.7327C14.3225 49.7746 14.4734 49.8166 14.6259 49.8551C14.7785 49.8954 14.9311 49.9322 15.0853 49.9675C15.2396 50.0027 15.3955 50.0362 15.5498 50.0681C15.7057 50.0999 15.8616 50.1301 16.0192 50.1586C16.1752 50.1871 16.3328 50.2122 16.4904 50.2374C16.648 50.2609 16.8072 50.2827 16.9665 50.3028C17.1258 50.3229 17.2851 50.3413 17.446 50.3581C17.607 50.3749 17.768 50.3883 17.9289 50.4017C18.0915 50.4134 18.2542 50.4235 18.4168 50.4319C18.5794 50.4403 18.7421 50.447 18.9064 50.4503C19.0707 50.4554 19.235 50.457 19.3993 50.457C19.5636 50.457 19.7279 50.4554 19.8923 50.4503C20.0566 50.447 20.2192 50.4403 20.3818 50.4319C20.5445 50.4235 20.7071 50.4134 20.8681 50.4017C21.0307 50.3883 21.1916 50.3749 21.3526 50.3581C21.5119 50.3413 21.6728 50.3229 21.8321 50.3028C21.9914 50.2827 22.149 50.2609 22.3066 50.2374H22.3083C22.4659 50.2122 22.6235 50.1854 22.7794 50.1586C22.937 50.1301 23.0929 50.0999 23.2489 50.0681C23.4031 50.0362 23.5574 50.0027 23.7116 49.9675C23.8659 49.9322 24.0201 49.8954 24.1727 49.8551C24.3253 49.8166 24.4762 49.7746 24.6271 49.7327C24.778 49.6891 24.9289 49.6439 25.0781 49.5986C25.2273 49.5516 25.3765 49.503 25.5241 49.4527C25.6716 49.4024 25.8192 49.3505 25.965 49.2985C26.1126 49.2448 26.2568 49.1895 26.4026 49.1325C26.5468 49.0755 26.691 49.0168 26.8335 48.9564C26.976 48.8961 27.1185 48.8341 27.2594 48.7703C27.4002 48.7066 27.5394 48.6396 27.6785 48.5742C28.3743 48.2388 29.0467 47.8616 29.6922 47.4475C29.8213 47.3653 29.9504 47.2815 30.0778 47.1943C30.331 47.0233 30.5808 46.8456 30.8256 46.6628C30.948 46.5706 31.0704 46.4784 31.1894 46.3828C31.3101 46.2889 31.4292 46.1934 31.5482 46.0961C31.6656 45.9989 31.7813 45.8999 31.897 45.7993C32.244 45.4992 32.5793 45.1874 32.9029 44.8638C33.0119 44.7548 33.1175 44.6458 33.2232 44.5352C33.3288 44.4245 33.4327 44.3122 33.5367 44.1998C33.639 44.0875 33.7396 43.9718 33.8402 43.8561C33.9408 43.7404 34.0397 43.6247 34.1369 43.5074C34.2342 43.3883 34.3297 43.2693 34.4236 43.1503C34.8026 42.6691 35.158 42.1694 35.4883 41.6514C35.5721 41.5223 35.6526 41.3931 35.7331 41.2607C35.8924 40.9991 36.0449 40.7326 36.1925 40.4626C36.2663 40.3268 36.3384 40.1893 36.4088 40.0535C36.4792 39.916 36.5463 39.7769 36.6133 39.6377C36.6804 39.4986 36.7458 39.3594 36.8095 39.2186C36.8732 39.0777 36.9369 38.9352 36.9973 38.7927C37.0576 38.6502 37.1163 38.506 37.1733 38.3618C37.2303 38.2159 37.2857 38.0717 37.3393 37.9242C37.3913 37.7783 37.4433 37.6308 37.4936 37.4832C37.5439 37.3357 37.5925 37.1865 37.6394 37.0373C37.6847 36.888 37.73 36.7371 37.7736 36.5862C37.8155 36.4353 37.8574 36.2844 37.8959 36.1319C37.9362 35.9793 37.9731 35.825 38.0083 35.6708C38.0435 35.5182 38.077 35.3623 38.1089 35.208C38.1407 35.0521 38.1709 34.8962 38.1994 34.7386C38.2279 34.5827 38.2531 34.4251 38.2782 34.2675C38.3017 34.1082 38.3235 33.9506 38.3436 33.7913C38.3637 33.632 38.3822 33.4711 38.3989 33.3118C38.4157 33.1508 38.4291 32.9899 38.4409 32.8272C38.4543 32.6663 38.4643 32.5036 38.4727 32.341C38.4811 32.1784 38.4878 32.0157 38.4912 31.8514C38.4945 31.6871 38.4979 31.5228 38.4979 31.3585C38.4979 31.1975 38.4962 31.0366 38.4912 30.8773L38.4895 30.8421C38.4861 30.6929 38.4811 30.542 38.4727 30.3928L38.471 30.3475C38.4627 30.2016 38.4543 30.0574 38.4425 29.9132L38.4392 29.8596C38.4274 29.7154 38.4157 29.5729 38.4006 29.4304L38.3956 29.3817C38.3805 29.2376 38.3654 29.095 38.347 28.9525L38.3419 28.9056C38.3235 28.7631 38.3034 28.6189 38.2816 28.4764L38.2749 28.4344C38.2514 28.2852 38.2279 28.136 38.2011 27.9885L38.1977 27.9734C38.1709 27.8191 38.1407 27.6649 38.1106 27.5123L38.1072 27.5022C38.077 27.353 38.0452 27.2055 38.0116 27.0596L38.0016 27.0194C37.9697 26.8802 37.9362 26.7427 37.901 26.6036L37.8892 26.5566C37.854 26.4225 37.8171 26.2884 37.7803 26.1542L37.7652 26.1022C37.7266 25.9698 37.688 25.839 37.6478 25.7082L37.6294 25.6529C37.5891 25.5221 37.5472 25.393 37.5036 25.2639L37.4869 25.212C37.4416 25.0795 37.3946 24.9487 37.3477 24.8179L37.3326 24.7777C37.284 24.6419 37.232 24.5078 37.18 24.3736L37.17 24.3485C37.1146 24.2093 37.0576 24.0702 37.0006 23.9327L36.9872 23.9042C36.9319 23.7751 36.8766 23.6443 36.8179 23.5169L36.7961 23.4683C36.7407 23.3442 36.6837 23.2235 36.6251 23.1027L36.5982 23.0474C36.5412 22.9284 36.4825 22.8093 36.4222 22.692L36.392 22.6333C36.3333 22.5176 36.2713 22.4036 36.2093 22.2879L36.1774 22.2275C36.1137 22.1119 36.05 21.9978 35.9846 21.8838L35.9544 21.8319C35.8873 21.7145 35.8203 21.6005 35.7499 21.4848L35.723 21.4395C35.6509 21.3205 35.5772 21.2014 35.5017 21.0841L35.4766 21.0455C35.4011 20.9282 35.324 20.8108 35.2452 20.6951L35.215 20.6498C35.1396 20.5409 35.0641 20.4319 34.987 20.3229L34.9501 20.2709C34.8763 20.1653 34.8009 20.063 34.7238 19.9591L34.6768 19.897C34.6014 19.7964 34.5259 19.6975 34.4488 19.6003L34.3985 19.5365C34.3214 19.4393 34.2442 19.3421 34.1654 19.2465L34.1151 19.1845C34.033 19.0855 33.9508 18.99 33.8687 18.8927L33.8234 18.8407C33.7362 18.7418 33.649 18.6429 33.5618 18.5457L33.525 18.5037L33.5216 18.5021C33.4512 19.1677 33.3623 19.8316 33.2517 20.4956C35.6023 23.4867 37.0023 27.2591 37.0023 31.3585C37.0023 41.0813 29.1221 48.9615 19.3993 48.9615C9.67652 48.9615 1.79466 41.0813 1.79466 31.3585C1.79466 21.6357 9.67652 13.7538 19.3993 13.7538C21.7382 13.7538 23.9715 14.2116 26.0136 15.0415ZM23.9598 4.29427C24.1174 4.15008 24.5701 3.74936 25.0345 3.29667C25.234 3.1005 25.4184 2.85236 25.6079 2.65787C26.3842 1.85476 26.9861 2.15991 27.0984 2.52542C27.3382 3.31679 26.297 3.31511 25.9516 3.38553C25.0328 3.57164 24.5499 3.9975 23.9598 4.29427ZM6.34672 42.3036L6.36181 42.3321L12.7381 40.575C12.4966 42.7579 12.339 44.7229 12.2049 46.2219L15.5749 39.3611C18.4721 33.4643 23.5943 35.5501 27.2661 31.0466C30.3913 27.2155 29.7442 14.6072 27.583 10.4341C27.9736 13.276 28.3207 18.2405 26.0254 20.0563C25.3497 20.5895 24.2431 19.7461 22.9773 19.7947C16.6077 20.0479 14.2168 29.4304 13.1052 37.6241L12.2317 38.335L6.34672 42.3036ZM17.3706 48.7838C16.8659 43.1737 19.3373 39.3309 23.8038 35.6037C18.8393 38.3433 14.4734 41.1601 15.9387 48.7838H17.3706ZM30.0275 25.72C32.8862 17.5933 31.9187 10.4006 30.6093 5.52659C29.8515 2.69979 28.7751 -0.512644 25.2407 0.733095C23.8223 1.23273 23.3612 3.53643 23.3612 3.53643L14.0324 11.4468C14.0324 11.4468 14.1179 11.6161 14.242 11.5692C15.4056 11.1249 22.4256 6.78239 24.1258 5.83677C25.0177 5.34049 26.0589 5.58527 26.9693 6.1721C31.8081 9.28561 31.0251 21.1947 30.0275 25.72Z" fill="white"></path></svg>
                    </a>
                </div>
                
                <ul class="flex text-white font-semibold flex-wrap">
                    <li><a href="../index.html" class="px-5 py-3.5 hover:text-white/70 transition-all">Проект</a></li>
                    <li><a href="../income.html" class="px-5 py-3.5 hover:text-white/70 transition-all">Доходы</a></li>
                    <li><a href="index.html" class="px-5 py-3.5 hover:text-white/70 transition-all text-red-500">Лоты</a></li>
                    <li><a href="../questions.html" class="px-5 py-3.5 hover:text-white/70 transition-all">Вопросы</a></li>
                    <li><a href="../developer.html" class="px-5 py-3.5 hover:text-white/70 transition-all">Девелопер</a></li>
                    <li><a href="../payment.html" class="px-5 py-3.5 hover:text-white/70 transition-all">Оплата</a></li>
                    <li><a href="../contacts.html" class="px-5 py-3.5 hover:text-white/70 transition-all">Контакты</a></li>
                </ul>

                <button class="bg-red-button font-semibold px-8 py-2.5 text-white rounded hover:bg-red-700 transition-colors" data-modal="learn-more">
                    Узнать больше
                </button>
            </div>
        </nav>
        
        <!-- Mobile Nav Bar -->
        <div class="lg:hidden p-4 flex justify-between items-center bg-black/50 backdrop-blur-sm fixed w-full top-0 z-50">
             <a href="../index.html" class="block font-bold text-xl">STORK</a>
             <button id="mobile-menu-toggle" class="text-white">
                 <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
             </button>
        </div>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu" class="fixed inset-0 bg-black/95 z-40 transform translate-x-full transition-transform duration-300 flex flex-col justify-center items-center">
            <button id="mobile-menu-close" class="absolute top-6 right-6 text-white">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <nav class="flex flex-col gap-6 text-center text-2xl font-bold">
                <a href="../index.html" class="hover:text-red-500">Проект</a>
                <a href="../income.html" class="hover:text-red-500">Доходы</a>
                <a href="index.html" class="hover:text-red-500 text-red-500">Лоты</a>
                <a href="../questions.html" class="hover:text-red-500">Вопросы</a>
                <a href="../developer.html" class="hover:text-red-500">Девелопер</a>
                <a href="../payment.html" class="hover:text-red-500">Оплата</a>
                <a href="../contacts.html" class="hover:text-red-500">Контакты</a>
            </nav>
        </div>
    </header>

    <main class="pt-24 md:pt-40 container mx-auto px-4 md:px-15 flex-grow">
        <a href="index.html" class="text-gray-400 hover:text-white mb-8 inline-flex items-center gap-2 transition-colors">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
            Вернуться к выбору
        </a>
        
        <div id="lot-detail" class="w-full">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-16">
                <!-- Skeleton Loader -->
                <div class="animate-pulse bg-gray-800 h-96 rounded-lg"></div>
                <div class="space-y-6">
                    <div class="animate-pulse bg-gray-800 h-10 w-3/4 rounded"></div>
                    <div class="animate-pulse bg-gray-800 h-6 w-1/2 rounded"></div>
                    <div class="animate-pulse bg-gray-800 h-24 w-full rounded"></div>
                    <div class="animate-pulse bg-gray-800 h-12 w-1/3 rounded"></div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-back-white-sections text-back-black-sections py-16 mt-24">
        <div class="container mx-auto px-4 md:px-15">
            <div class="flex justify-between items-start md:flex-row flex-col gap-8">
                <div class="flex gap-4 text-sm order-4 md:order-1 items-center">
                    <a target="_blank" href="https://ained-digital.ru/" class="font-bold text-xl">AINED</a>
                    <p class="text-gray-500 text-xs">Создание сайта — <br>Ained Digital</p>
                </div>

                <div class="font-semibold flex flex-col order-1 md:order-2 gap-2">
                    <div class="flex gap-2">
                        <a href="https://vk.com/stork_hotels" target="_blank" class="text-blue-600 hover:text-blue-800">VK</a>
                        <a href="https://t.me/stork_hotels" target="_blank" class="text-blue-400 hover:text-blue-600">TG</a>
                    </div>
                    <div>
                        <a href="tel:+74742516393" class="block hover:underline">+7 (4742) 51-63-93</a>
                        <p class="text-gray-600">улица М.И. Неделина, 6</p>
                    </div>
                </div>

                <div class="flex flex-col font-semibold order-2 md:order-3">
                    <p>©Stork Hotel, <span id="year">2024</span></p>
                    <a href="#" class="hover:underline text-sm">Политика конфиденциальности</a>
                    <a href="#" class="hover:underline text-sm">Согласие пользователя</a>
                    <a href="../documents.html" class="hover:underline text-sm text-red-600">Проектные декларации</a>
                </div>
                
                 <div class="flex flex-col text-xs text-gray-500 md:hidden order-3">
                    <p>ООО «РСС» ИНН: 4826152621</p>
                    <p>г. Липецк, ул. Космонавтов, д. 26/1</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modals (Hidden) -->
    <div id="modal-backdrop" class="fixed inset-0 bg-black/80 z-[60] hidden flex justify-center items-center">
        <div class="bg-white text-black p-8 rounded-lg max-w-md w-full mx-4 relative">
            <button id="modal-close" class="absolute top-4 right-4 text-gray-500 hover:text-black">✕</button>
            <h2 class="text-2xl font-bold mb-4">Оставить заявку</h2>
            <form class="flex flex-col gap-4">
                <input type="text" placeholder="Имя" class="border p-2 rounded">
                <input type="tel" placeholder="Телефон" class="border p-2 rounded">
                <button type="submit" class="bg-red-button text-white py-3 rounded font-bold hover:bg-red-700">Отправить</button>
            </form>
        </div>
    </div>

    <script type="module">
        import '../assets/js/app.js';
        import { fetchApi } from '../assets/js/modules/state.js';
        import { Gallery } from '../assets/js/modules/gallery.js';

        const params = new URLSearchParams(window.location.search);
        const lotId = params.get('id');
        const categoryId = params.get('category_id');
        const floorParam = params.get('floor');
        const facadeParam = params.get('facade');

        async function loadLot() {
            const container = document.getElementById('lot-detail');
            
            if (!lotId) {
                container.innerHTML = '<div class="text-center py-20"><p class="text-2xl">Лот не найден</p><a href="index.html" class="text-red-500 hover:underline mt-4 inline-block">Перейти к списку лотов</a></div>';
                return;
            }

            try {
                const [lotsResp, associatesResp, decorationsResp] = await Promise.all([
                    fetchApi('/lots/', { id: lotId }),
                    fetchApi('/lots/associate', { id: lotId }),
                    fetchApi('/decorations')
                ]);
                
                if (lotsResp && lotsResp.data && lotsResp.data.length > 0) {
                    const lot = lotsResp.data[0];
                    const related = associatesResp && Array.isArray(associatesResp.data) ? associatesResp.data : [];
                    renderLot(lot, container, related);
                } else {
                    container.innerHTML = '<div class="text-center py-20"><p class="text-2xl">Лот не найден или удален</p><a href="index.html" class="text-red-500 hover:underline mt-4 inline-block">Перейти к списку лотов</a></div>';
                }
            } catch(e) {
                console.error(e);
                container.innerHTML = '<div class="text-center py-20"><p class="text-red-500 text-xl">Ошибка загрузки данных</p></div>';
            }
        }

        async function loadLayouts() {
            const container = document.getElementById('lot-detail');
            
            if (!categoryId) {
                loadLot();
                return;
            }

            container.innerHTML = `
                <div class="space-y-6">
                    <div class="animate-pulse bg-gray-800 h-10 w-3/4 rounded"></div>
                    <div class="animate-pulse bg-gray-800 h-6 w-1/2 rounded"></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="aspect-[4/5] bg-gray-800 animate-pulse rounded-lg"></div>
                        <div class="aspect-[4/5] bg-gray-800 animate-pulse rounded-lg"></div>
                        <div class="aspect-[4/5] bg-gray-800 animate-pulse rounded-lg"></div>
                    </div>
                </div>
            `;

            try {
                const blockId = facadeParam || null;

                const [facadeInfo, floorCategories, categoryInfo, decorations, associates, lotsResponse] = await Promise.all([
                    blockId ? fetchApi('/facade', { block_id: blockId }) : Promise.resolve(null),
                    blockId && floorParam ? fetchApi('/categories', { block_id: blockId, floor: floorParam }) : Promise.resolve(null),
                    fetchApi('/categories/info', { category_id: categoryId }),
                    fetchApi('/decorations'),
                    fetchApi('/categories/associate', { id: categoryId }),
                    fetchApi('/lots/', Object.assign(
                        { category_id: categoryId, page: 1 },
                        blockId ? { block_id: blockId } : {},
                        floorParam ? { floor: floorParam } : {}
                    ))
                ]);

                const lots = lotsResponse && Array.isArray(lotsResponse.data) ? lotsResponse.data : [];
                renderLayoutsPage(container, {
                    facadeInfo,
                    floorCategories,
                    categoryInfo,
                    decorations,
                    associates,
                    lots
                });
            } catch (e) {
                console.error(e);
                container.innerHTML = '<div class="text-center py-20"><p class="text-red-500 text-xl">Ошибка загрузки схем планировок</p></div>';
            }
        }

        function renderLot(lot, container, relatedLots) {
            const title = formatTitle(lot.name || lot.category?.current_name || 'Лот');
            const categoryName = lot.category && (lot.category.name || lot.category.current_name) ? (lot.category.name || lot.category.current_name) : 'Апартаменты';
            const status = lot.status?.name || 'Свободно';
            const decoration = lot.decoration?.name || 'WHITE-BOX';

            let blockName = '-';
            if (typeof lot.block === 'number' || typeof lot.block === 'string') {
                blockName = lot.block;
            } else if (lot.block && (lot.block.name || lot.block.title || lot.block.code)) {
                blockName = lot.block.name || lot.block.title || lot.block.code;
            } else if (lot.block_name) {
                blockName = lot.block_name;
            }

            let area = lot.area ? `${lot.area} м²` : (lot.min_area ? `${lot.min_area} - ${lot.max_area} м²` : '-');
            let floor = lot.floor ? `${lot.floor}` : (lot.min_floor ? `${lot.min_floor} - ${lot.max_floor}` : '-');

            container.innerHTML = `
                <div class="space-y-16 animate-fade-in">
                    <div class="grid grid-cols-1 md:grid-cols-[minmax(0,1.2fr)_minmax(0,1fr)] gap-10 md:gap-20 items-start">
                        <div class="flex flex-col gap-8">
                            <div class="space-y-3">
                                <div class="text-sm text-gray-500 uppercase tracking-[0.2em]">
                                    ${categoryName}
                                </div>
                                <h1 class="text-3xl md:text-5xl lg:text-6xl font-unbounded leading-tight">
                                    ${title}
                                </h1>
                            </div>

                            <div class="grid grid-cols-2 lg:grid-cols-3 gap-6 text-sm md:text-base">
                                <div class="space-y-1">
                                    <p class="text-gray-500 uppercase tracking-[0.18em] text-xs">Площадь</p>
                                    <p class="text-xl md:text-2xl font-bold">${area}</p>
                                </div>
                                <div class="space-y-1">
                                    <p class="text-gray-500 uppercase tracking-[0.18em] text-xs">Этаж</p>
                                    <p class="text-xl md:text-2xl font-bold">${floor}</p>
                                </div>
                                <div class="space-y-1">
                                    <p class="text-gray-500 uppercase tracking-[0.18em] text-xs">Блок</p>
                                    <p class="text-xl md:text-2xl font-bold">${blockName}</p>
                                </div>
                                <div class="space-y-1">
                                    <p class="text-gray-500 uppercase tracking-[0.18em] text-xs">Отделка</p>
                                    <p class="text-xl md:text-2xl font-bold">${decoration}</p>
                                </div>
                                <div class="space-y-1">
                                    <p class="text-gray-500 uppercase tracking-[0.18em] text-xs">Статус</p>
                                    <p class="text-xl md:text-2xl font-bold">${status}</p>
                                </div>
                                <div class="space-y-1">
                                    <p class="text-gray-500 uppercase tracking-[0.18em] text-xs">Категория лота</p>
                                    <p class="text-xl md:text-2xl font-bold">${categoryName}</p>
                                </div>
                            </div>

                            <div class="flex flex-col sm:flex-row sm:items-center gap-4">
                                <button class="inline-flex items-center justify-center gap-3 bg-red-button text-white px-10 py-4 rounded font-bold hover:bg-red-700 transition-colors text-lg w-full sm:w-auto text-center" data-modal="leave-request">
                                    <span>Инвестировать</span>
                                </button>
                            </div>
                        </div>

                        <div class="w-full">
                            <div id="lot-gallery" class="relative w-full rounded-2xl overflow-hidden bg-gray-900 aspect-[16/9] md:h-[420px] flex items-center justify-center">
                            </div>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <h2 class="text-2xl md:text-3xl font-unbounded">Вам могут подойти</h2>
                        <div id="lot-related" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        </div>
                    </div>

                    <div class="space-y-6 bg-back-white-sections text-back-black-sections -mx-4 md:-mx-15 px-4 md:px-15 py-12 md:py-16">
                        <h2 class="text-2xl md:text-3xl font-unbounded mb-4 md:mb-8">Варианты покупки</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-10">
                            <div class="relative overflow-hidden rounded-2xl h-56 md:h-72">
                                <img src="https://stork-hotels.ru/_nuxt/payment.ORYe8UMS.jpg" alt="100% оплата" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent p-6 flex items-end">
                                    <p class="text-white text-xl font-bold">100% оплата</p>
                                </div>
                            </div>
                            <div class="relative overflow-hidden rounded-2xl h-56 md:h-72">
                                <img src="https://stork-hotels.ru/_nuxt/payment-2.C3wVrhaV.jpg" alt="Рассрочка" class="w-full h-full object-cover">
                                <div class="absolute inset-0 bg-gradient-to-t from-black/70 to-transparent p-6 flex items-end">
                                    <p class="text-white text-xl font-bold">Рассрочка</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            if (lot.pictures && lot.pictures.length > 0) {
                new Gallery('lot-gallery', lot.pictures);
            } else {
                 new Gallery('lot-gallery', [{ name: 'default_image.jpg', path: '/storage/static/default_image.jpg' }]);
            }

            const relatedContainer = document.getElementById('lot-related');
            if (relatedContainer) {
                const list = Array.isArray(relatedLots) ? relatedLots : [];
                if (!list.length) {
                    relatedContainer.innerHTML = '<p class="text-gray-400 col-span-full">Похожие варианты появятся позже</p>';
                } else {
                    relatedContainer.innerHTML = list.slice(0, 4).map(item => {
                        const itemTitle = formatTitle(item.name || item.category?.current_name || 'Апартаменты');
                        const itemArea = item.area || item.min_area || '';
                        const itemFloor = item.floor || item.min_floor || '';
                        const itemStatus = item.status?.name || '';

                        let imageSrc = '/storage/static/default_image.jpg';
                        if (item.pictures && item.pictures.length > 0) {
                            const withPath = item.pictures.find(p => p.path);
                            const withGallery = item.pictures.find(p => p.gallery);
                            if (withPath) imageSrc = withPath.path;
                            else if (withGallery) imageSrc = withGallery.gallery;
                        }

                        return `
                            <a href="detail.html?id=${item.id}" class="bg-white text-back-black-sections rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-shadow flex flex-col">
                                <div class="aspect-[3/2] bg-gray-200">
                                    <img src="${imageSrc}" alt="${itemTitle}" class="w-full h-full object-cover">
                                </div>
                                <div class="p-4 flex flex-col gap-2">
                                    <p class="text-sm text-gray-500 uppercase tracking-[0.18em]">${item.category?.name || categoryName}</p>
                                    <p class="font-unbounded text-lg">${itemTitle}</p>
                                    <div class="flex justify-between text-sm text-gray-600">
                                        <span>${itemArea ? itemArea + ' м²' : ''}</span>
                                        <span>${itemFloor ? itemFloor + ' этаж' : ''}</span>
                                    </div>
                                    ${itemStatus ? `<p class="text-xs font-semibold ${itemStatus.toLowerCase().includes('продан') ? 'text-gray-500' : 'text-red-600'}">${itemStatus}</p>` : ''}
                                </div>
                            </a>
                        `;
                    }).join('');
                }
            }
        }

        function renderLayoutsPage(container, data) {
            const info = data && data.categoryInfo && data.categoryInfo.data ? data.categoryInfo.data : null;
            const lots = data && Array.isArray(data.lots) ? data.lots : [];
            const decorations = data && Array.isArray(data.decorations) ? data.decorations : [];

            const state = {
                lots,
                decorations,
                currentDecoration: 'all',
                status: 'all'
            };

            container.innerHTML = `
                <div class="mb-8">
                    <h1 class="text-3xl md:text-5xl font-unbounded mb-2">${info && info.name ? info.name : 'Планировки'}</h1>
                    <p class="text-gray-400 text-sm">${info && info.description ? info.description : ''}</p>
                </div>
                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
                    <div id="layouts-decorations-filter" class="flex flex-wrap gap-2"></div>
                    <div id="layouts-status-filter" class="flex items-center gap-2"></div>
                </div>
                <div id="layouts-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                </div>
            `;

            const decorationsFilterEl = document.getElementById('layouts-decorations-filter');
            const statusFilterEl = document.getElementById('layouts-status-filter');
            const gridEl = document.getElementById('layouts-grid');

            function getDecorationId(lot) {
                if (!lot) return null;
                if (lot.decoration_id) return lot.decoration_id;
                if (lot.decoration && lot.decoration.id) return lot.decoration.id;
                return null;
            }

            function getDecorationName(id) {
                if (!id || !decorations.length) return '';
                const found = decorations.find(d => String(d.id) === String(id));
                return found && found.name ? found.name : '';
            }

            function renderDecorationsFilter() {
                if (!decorationsFilterEl) return;

                const decorationIds = Array.from(
                    new Set(
                        state.lots
                            .map(l => getDecorationId(l))
                            .filter(Boolean)
                    )
                );

                const hasDecorations = decorationIds.length > 0;

                if (!hasDecorations) {
                    decorationsFilterEl.innerHTML = '<span class="text-sm text-gray-400">Фильтр по отделке недоступен</span>';
                    return;
                }

                const buttonsHtml = [
                    `<button data-decoration="all" class="px-4 py-2 rounded-full text-sm font-semibold bg-white text-black">Все планировки</button>`
                ].concat(
                    decorationIds.map(id => {
                        const name = getDecorationName(id) || `Вариант ${id}`;
                        return `<button data-decoration="${id}" class="px-4 py-2 rounded-full text-sm font-semibold bg-transparent border border-white/20 text-white hover:bg-white hover:text-black transition-colors">${name}</button>`;
                    })
                ).join('');

                decorationsFilterEl.innerHTML = buttonsHtml;

                decorationsFilterEl.querySelectorAll('button[data-decoration]').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const value = btn.getAttribute('data-decoration');
                        state.currentDecoration = value;

                        decorationsFilterEl.querySelectorAll('button[data-decoration]').forEach(b => {
                            b.classList.remove('bg-white', 'text-black');
                            b.classList.add('bg-transparent', 'text-white');
                        });

                        btn.classList.add('bg-white', 'text-black');
                        btn.classList.remove('bg-transparent', 'text-white');

                        applyLayoutsFilters();
                    });
                });
            }

            function renderStatusFilter() {
                if (!statusFilterEl) return;

                statusFilterEl.innerHTML = `
                    <label class="inline-flex items-center cursor-pointer gap-2">
                        <span class="text-white text-sm font-medium">Только в продаже</span>
                        <input type="checkbox" id="layouts-status-toggle" class="sr-only peer">
                        <div class="relative w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-red-600"></div>
                    </label>
                `;

                const toggle = document.getElementById('layouts-status-toggle');
                if (toggle) {
                    toggle.addEventListener('change', (e) => {
                        state.status = e.target.checked ? 'sale' : 'all';
                        applyLayoutsFilters();
                    });
                }
            }

            function applyLayoutsFilters() {
                let filtered = state.lots.slice();

                if (state.currentDecoration !== 'all') {
                    filtered = filtered.filter(lot => {
                        const id = getDecorationId(lot);
                        return id && String(id) === String(state.currentDecoration);
                    });
                }

                if (state.status === 'sale') {
                    filtered = filtered.filter(lot => {
                        const s = lot.status && lot.status.name ? lot.status.name.toLowerCase() : '';
                        if (!s) return true;
                        return !s.includes('продан') && !s.includes('бронь');
                    });
                }

                renderLayoutsGrid(filtered);
            }

            function renderLayoutsGrid(list) {
                if (!gridEl) return;

                if (!list.length) {
                    gridEl.innerHTML = '<p class="text-white text-center col-span-full font-unbounded">Нет планировок для выбранных фильтров</p>';
                    return;
                }

                gridEl.innerHTML = list.map(lot => {
                    const title = formatTitle(lot.name || lot.category?.current_name || 'Лот');

                    let areaText = '';
                    if (lot.area) {
                        areaText = `${lot.area} м²`;
                    } else if (lot.min_area) {
                        areaText = `${lot.min_area} - ${lot.max_area} м²`;
                    }

                    let floorText = '';
                    if (lot.floor) {
                        floorText = `${lot.floor} этаж`;
                    } else if (lot.min_floor) {
                        floorText = `${lot.min_floor} - ${lot.max_floor} этаж`;
                    }

                    let imageSrc = '/storage/static/default_image.jpg';
                    if (lot.pictures && lot.pictures.length > 0) {
                        const withPath = lot.pictures.find(p => p.path);
                        const withGallery = lot.pictures.find(p => p.gallery);
                        if (withPath) {
                            imageSrc = withPath.path;
                        } else if (withGallery) {
                            imageSrc = withGallery.gallery;
                        }
                    }

                    const statusName = lot.status && lot.status.name ? lot.status.name : '';
                    const isSold = statusName.toLowerCase().includes('продан');
                    const statusHtml = statusName ? `
                        <div class="absolute top-4 right-4 z-20 px-3 py-1 rounded text-xs font-bold uppercase tracking-wider ${isSold ? 'bg-gray-800 text-white' : 'bg-red-600 text-white'}">
                            ${statusName}
                        </div>
                    ` : '';

                    const abbreviation = lot.abbreviation || (lot.category ? lot.category.abbreviation : '');
                    const abbrHtml = abbreviation ? `
                        <div class="bg-[#902F2F] py-0.5 px-3 text-white rounded self-start text-sm font-bold uppercase mb-2 inline-block">
                            ${abbreviation}
                        </div>
                    ` : '';

                    const numberText = lot.number_object || lot.id;

                    return `
                        <div class="bg-white p-5 rounded-lg relative group cursor-pointer hover:shadow-xl transition-all duration-300">
                           ${statusHtml}
                            <div class="mb-5 relative aspect-[3/2.5] rounded-xl overflow-hidden bg-gray-200">
                                <img src="${imageSrc}" alt="${title}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105">
                            </div>
                            <div class="flex flex-col gap-2.5">
                                ${abbrHtml}
                                <p class="font-unbounded text-2xl text-black leading-tight">${title}</p>
                                <p class="text-sm font-semibold text-gray-600">${areaText}</p>
                                <div class="flex items-center justify-between text-sm text-gray-500">
                                    <span>${floorText}</span>
                                    <span>№${numberText}</span>
                                </div>
                            </div>
                            <a href="detail.html?id=${lot.id}" class="absolute inset-0 z-10"></a>
                        </div>
                    `;
                }).join('');
            }

            renderDecorationsFilter();
            renderStatusFilter();
            applyLayoutsFilters();
        }

        function formatTitle(text) {
            if (!text) return '';
            text = text.toLowerCase();
            return text.charAt(0).toUpperCase() + text.slice(1);
        }

        document.addEventListener('DOMContentLoaded', () => {
            if (categoryId) {
                loadLayouts();
            } else {
                loadLot();
            }
        });
    </script>
</body>
</html>
